 

## 场景描述

积分相关操作，包含申请积分、销毁积分、转移积分、查询积分等。积分用于链上记账，在购买数字藏品时记录售价使用，售价和积分的对应关系为 1 元对应 100 积分。

申请积分使用场景：
用户在已完成资金打款给平台后（至信链不提供支付能力），然后平台才申请积分。目前实际使用场景只有在售卖时，用户完成支付，平台会为用户申请积分。

## 相关接口



### 申请积分

api/v1/nft/point/apply

#### 鉴权方式

方案一

#### 请求方式

POST

#### 请求参数

|  字段名            	|  类型   	|  是否必填 	|  描述                                                                                                                              	|
|--------------------	|---------	|-----------	|------------------------------------------------------------------------------------------------------------------------------------	|
|  applyerAddr       	|  string 	|  是       	|  申请对象地址                                                                                                                      	|
|  platformPubKey    	|  string 	|  是       	|  平台公钥                                                                                                                          	|
|  count             	|  int64  	|  是       	|  积分数量                                                                                                                          	|
|  operateId         	|  string 	|  是       	|  请求 ID，每个请求需要填唯一的 id，重复请求用相同的 id。                                                                              	|
|  platformSignature 	|  string 	|  是       	|  平台方的私钥签名，签名对象和 signature 对象一致。签名对象是（platformPubKey_applyerAddr_接口名_count_operateId)  <br>接口名=apply_point 	|

#### 响应参数

|  字段名  	|  类型   	|  是否必填 	|  描述                                        	|
|----------	|---------	|-----------	|----------------------------------------------	|
|  retCode 	|  int    	|  是       	|  返回状态码，取值：0-成功， 其他-失败        	|
|  retMsg  	|  string 	|  是       	|  返回信息，取值：成功为 OK, 失败-错误原因说明 	|
|  data    	|  json   	|  是       	|      -                                        	|

data 结构如下：

|  字段名 	|  类型   	|  是否必填 	|  描述   	|
|---------	|---------	|-----------	|---------	|
|  taskId 	|  string 	|  是       	|  任务 ID 	|


---
### 查询积分申请结果

api/v1/nft/point/apply/result

#### 鉴权方式

方案一

#### 请求方式

GET

#### 请求参数

|  字段名         	|  类型   	|  是否必填 	|  描述     	|
|-----------------	|---------	|-----------	|-----------	|
|  platformPubKey 	|  string 	|  是       	|  平台公钥 	|
|  taskId         	|  string 	|  是       	|  任务 ID   	|

#### 响应参数

|  字段名  	|  类型   	|  是否必填 	|  描述                                        	|
|----------	|---------	|-----------	|----------------------------------------------	|
|  retCode 	|  int    	|  是       	|  返回状态码，取值：0-成功， 其他-失败        	|
|  retMsg  	|  string 	|  是       	|  返回信息，取值：成功为 OK, 失败-错误原因说明 	|
|  data    	|  json   	|  是       	|       -                                       	|

data 结构如下：

|  字段名         	|  类型   	|  是否必填 	|  描述                                                  	|
|-----------------	|---------	|-----------	|--------------------------------------------------------	|
|  taskStatus     	|  int    	|  是       	|  标记任务状态，任务执行中：2， 任务成功：7,  任务失败：10 	|
|  taskMsg        	|  string 	|  是       	|  失败情况下会有提示信息                                	|
|  txHash         	|  string 	|  是       	|  交易 hash                                              	|
|  chainTimestamp 	|  int64  	|  是       	|  链上交易时间戳                                        	|


---
### 积分销毁

api/v1/nft/point/destroy

#### 鉴权方式

方案一

#### 请求方式

POST

#### 请求参数

|  字段名            	|  类型   	|  是否必填 	|  描述                                                                                            	|
|--------------------	|---------	|-----------	|--------------------------------------------------------------------------------------------------	|
|  addr              	|  string 	|  是       	|  销毁人的地址                                                                                    	|
|  platformPubKey    	|  string 	|  是       	|  平台公钥                                                                                        	|
|  count             	|  int64  	|  是       	|  积分数量                                                                                        	|
|  operateId         	|  string 	|  是       	|  请求 ID，每个请求需要填唯一的 id，重复请求用相同的 id。                                            	|
|  signature         	|  string 	|  是       	|  销毁人的私钥签名，签名对象是（platformPubKey_addr_接口名_count_operateId)  接口名=destroy_point 	|
|  platformSignature 	|  string 	|  是       	|  平台方的私钥签名，签名对象和 signature 对象一致                                                   	|

返回参数

|  字段名  	|  类型   	|  是否必填 	|  描述                                        	|
|----------	|---------	|-----------	|----------------------------------------------	|
|  retCode 	|  int    	|  是       	|  返回状态码，取值：0-成功， 其他-失败        	|
|  retMsg  	|  string 	|  是       	|  返回信息，取值：成功为 OK, 失败-错误原因说明 	|
|  data    	|  json   	|  是       	|           -                                   	|

data 结构如下：

|  字段名 	|  类型   	|  是否必填 	|  描述   	|
|---------	|---------	|-----------	|---------	|
|  taskId 	|  string 	|  是       	|  任务 ID 	|


---
### 查询积分销毁结果

api/v1/nft/point/destroy/result

#### 鉴权方式

方案一

#### 请求方式

GET

#### 请求参数

|  字段名         	|  类型   	|  是否必填 	|  描述         	|
|-----------------	|---------	|-----------	|---------------	|
|  platformPubKey 	|  string 	|  是       	|  平台公钥     	|
|  taskId         	|  string 	|  是       	|  查询任务结果 	|

#### 响应参数

|  字段名  	|  类型   	|  是否必填 	|  描述                                        	|
|----------	|---------	|-----------	|----------------------------------------------	|
|  retCode 	|  int    	|  是       	|  返回状态码，取值：0-成功， 其他-失败        	|
|  retMsg  	|  string 	|  是       	|  返回信息，取值：成功为 OK, 失败-错误原因说明 	|
|  data    	|  json   	|  是       	|           -                                   	|

data 结构如下：

|  字段名         	|  类型   	|  是否必填 	|  描述                                                  	|
|-----------------	|---------	|-----------	|--------------------------------------------------------	|
|  taskStatus     	|  int    	|  是       	|  标记任务状态，任务执行中：2， 任务成功：7,  任务失败：10 	|
|  taskMsg        	|  string 	|  是       	|  失败情况下会有提示信息                                	|
|  txHash         	|  string 	|  是       	|  交易 hash                                              	|
|  chainTimestamp 	|  int64  	|  是       	|  链上交易时间戳                                        	|


---
### 积分查询

api/v1/nft/point/query


#### 鉴权方式

方案一

#### 请求方式

GET

请求字段

|  字段名       	|  类型   	|  是否必填 	|  描述       	|
|---------------	|---------	|-----------	|-------------	|
|  addr         	|  string 	|  是       	|  查询人地址 	|
|  platformAddr 	|  string 	|  是       	|  平台地址   	|

#### 响应参数

|  字段名  	|  类型   	|  是否必填 	|  描述                                        	|
|----------	|---------	|-----------	|----------------------------------------------	|
|  retCode 	|  int    	|  是       	|  返回状态码，取值：0-成功， 其他-失败        	|
|  retMsg  	|  string 	|  是       	|  返回信息，取值：成功为 OK, 失败-错误原因说明 	|
|  data    	|  object 	|  是       	|  包体                                        	|

data：

|  字段名 	|  类型 	|  是否必填 	|  描述 	|
|---	|---	|---	|---	|
|  count 	|  int64 	|  是 	|  积分数量 	|


---
### 平台积分转移

api/v1/nft/point/transfer


#### 鉴权方式

方案一

#### 请求方式

POST

#### 请求参数

|  字段名 	|  类型 	|  是否必填 	|  描述 	|
|---	|---	|---	|---	|
|  platformPubKey 	|  string 	|  是 	|  平台的公钥 	|
|  fromPubKey 	|  string 	|  是 	|  转出者公钥（可以与平台公钥相同，前提是账户有积分可转） 	|
|  toAddr 	|  string 	|  是 	|  积分接收者的地址 	|
|  count 	|  uint64 	|  是 	|  积分数量 	|
|  operateId 	|  string 	|  是 	|  请求 ID，每个请求需要填唯一的 id，重复请求用相同的 id。 	|
|  signature 	|  string 	|  是 	|  转出者的私钥签名，签名对象是 (platformPubKey_fromPubKey_toAddr_接口名_count_operateId) 接口名：transfer_point 	|
|  platformSignature 	|  string 	|  是 	|  平台方的私钥签名，签名对象和 signature 对象一致 	|

#### 响应参数

|  字段名  	|  类型   	|  是否必填 	|  描述                                        	|
|----------	|---------	|-----------	|----------------------------------------------	|
|  retCode 	|  int    	|  是       	|  返回状态码，取值：0-成功， 其他-失败        	|
|  retMsg  	|  string 	|  是       	|  返回信息，取值：成功为 OK, 失败-错误原因说明 	|
|  data    	|  json   	|  是       	|             -                                 	|

data

|  字段名 	|  类型   	|  是否必填 	|  描述   	|
|---------	|---------	|-----------	|---------	|
|  taskId 	|  string 	|  是       	|  任务 ID 	|


---
### 平台积分转移状态查询

api/v1/nft/point/transfer/result


#### 鉴权方式

方案一

#### 请求方式

GET

#### 请求参数

|  字段名         	|  类型   	|  是否必填 	|  描述                             	|
|-----------------	|---------	|-----------	|-----------------------------------	|
|  platformPubKey 	|  string 	|  是       	|  积分转移发起者的公钥，即平台公钥 	|
|  taskId         	|  string 	|  是       	|  任务 ID                           	|

#### 响应参数

|  字段名  	|  类型   	|  是否必填 	|  描述                                        	|
|----------	|---------	|-----------	|----------------------------------------------	|
|  retCode 	|  int    	|  是       	|  返回状态码，取值：0-成功， 其他-失败        	|
|  retMsg  	|  string 	|  是       	|  返回信息，取值：成功为 OK, 失败-错误原因说明 	|
|  data    	|  json   	|  是       	|               -                               	|

data 结构如下：

|  字段名         	|  类型   	|  是否必填 	|  描述                                                  	|
|-----------------	|---------	|-----------	|--------------------------------------------------------	|
|  taskStatus     	|  int    	|  是       	|  标记任务状态，任务执行中：2， 任务成功：7,  任务失败：10 	|
|  taskMsg        	|  string 	|  是       	|  失败情况下会有提示信息                                	|
|  txHash         	|  string 	|  是       	|  交易 hash                                              	|
|  chainTimestamp 	|  int64  	|  是       	|  链上交易时间戳                                        	|
