
## 场景描述

**实名注册**：个人用户实名信息通过平台签名的方式提交到至信链进行三要素核验。
**绑定地址**：用户通过 SDK 生成公私钥以及对应的地址，结合实名后返回的用户唯一标识，由平台方签名并发起绑定。

## 场景交互图
![](https://qcloudimg.tencent-cloud.cn/raw/4b07191419806bed84ad6469c57f366b.png)

>! 注册与绑定必须保证平台的公私钥是有效的，并且与平台本身的 SecretId 对应。

流程如下：

1. 调用自然人注册接口（平台签名）提交实名信息，返回用户唯一标识。
2. 使用 SDK 生成公私钥：先调用 sdk 生成助记词，然后通过助记词派生生成公私钥对。
3. （非必须，但建议有）平台方使用第三方人脸核身能力校验是否是本人操作。
4. 调用授信平台身份绑定接口（平台签名）绑定公私钥和用户唯一标识，返回地址。
5.  调用绑定状态批量查询接口，查询地址绑定状态，返回状态为已绑定即完成。

## 相关接口



### 自然人注册实名（使用数字藏品平台签名）接口

api/v1/nft/register/person_platform

#### 请求方式

POST

#### 鉴权方案

方案一

#### 请求参数

 |  字段名           	|  类型   	|  是否必填 	|  描述                                                                                            	|
|-------------------	|---------	|-----------	|--------------------------------------------------------------------------------------------------	|
|  personName       	|  string 	|  是       	|  用户名                                                                                          	|
|  email            	|  string 	|  否       	|  用户邮箱                                                                                        	|
|  mobile           	|  string 	|  是       	|  手机                                                                                            	|
|  idCard           	|  string 	|  是       	|  证件号码                                                                                        	|
|  cardType         	|  int    	|  是       	|  证件类型：<br>1. 身份证<br>2. 护照 <br>3. 港澳通行证<br> 4. 台湾通行证<br> 5. 外国人永居身份证<br> 6. 港澳台居民居住证<br> 7. 其他 	|
|  platformPubKey   	|  string 	|  是       	|  平台公钥                                                                                        	|
|  platformSignData 	|  string 	|  是       	|  平台签名信息：sign(personName_cardType_idCard)                                                   	|

#### 响应参数

|  字段名  	|  类型   	|  是否必填 	|  描述        	|
|----------	|---------	|-----------	|--------------	|
|  retCode 	|  int    	|  是       	|  返回状态码  	|
|  retMsg  	|  string 	|  是       	|  返回信息    	|
|  data    	|  json   	|    -       	|  无          	|

data 结构如下：

|  字段名             	|  类型   	|  是否必填 	|  描述         	|
|---------------------	|---------	|-----------	|---------------	|
|  userIdentification 	|  string 	|  是       	|  用户唯一标识 	|


---
### 受信平台用户身份绑定接口

api/v1/nft/identity/bind/submit_by_trusted_platform

调用成功得到地址后，需要再使用绑定状态批量查询接口，获取绑定状态。

#### 请求方式

POST

#### 鉴权方案

方案一

#### 请求参数

|  字段名             	|  类型   	|  是否必填 	|  描述                             	|
|---------------------	|---------	|-----------	|-----------------------------------	|
|  userSignData       	|  string 	|  是       	|  用户签名信息 sign（用户唯一标识） 	|
|  userPubKey         	|  string 	|  是       	|  用户公钥                         	|
|  platformPubKey     	|  string 	|  是       	|  平台公钥                         	|
|  platformSignData   	|  string 	|  是       	|  平台签名信息：sign(userSignData)  	|
|  userIdentification 	|  string 	|  是       	|  用户唯一标识                     	|

#### 响应参数

|  字段名  	|  类型   	|  是否必填 	|  描述        	|
|----------	|---------	|-----------	|--------------	|
|  retCode 	|  int    	|  是       	|  返回状态码  	|
|  retMsg  	|  string 	|  是       	|  返回信息    	|
|  data    	|  json   	|  是       	|                      -                        	|

data 结构如下：

|  字段名 	|  类型   	|  是否必填 	|  描述                                        	|
|----------	|---------	|-----------	|----------------------------------------------	|
|  address 	|  string 	|  是       	|  address地址                                    |


---
### 绑定状态批量查询接口

api/v1/nft/identity/bind/query

示例：
api/v1/nft/identity/bind/query?addressList=ZXaaabbb&addressList=ZXcccddd&addressList=ZXeeefff

#### 请求方式

GET

####   鉴权方案

方案二

#### 请求参数

|  字段名      	|  类型        	|  是否必填 	|  描述                	|
|--------------	|--------------	|-----------	|----------------------	|
|  addressList 	|  string list 	|  是       	|  query 参数。地址列表 	|

#### 响应参数

|  字段名  	|  类型   	|  是否必填 	|  描述        	|
|----------	|---------	|-----------	|--------------	|
|  retCode 	|  int    	|  是       	|  返回状态码  	|
|  retMsg  	|  string 	|  是       	|  返回信息    	|
|  data    	|  json   	|      -     	|  无          	|

RetData 说明：

|  字段名 	|  类型                 	|  是否必填 	|  描述 	|
|---------	|-----------------------	|-----------	|-------	|
|  list   	|  json array-ListData  	|  是       	|   -    	|

ListData 说明：

|  字段名  	|  类型   	|  是否必填 	|  描述                                                    	|
|----------	|---------	|-----------	|----------------------------------------------------------	|
|  address 	|  string 	|  是       	|  地址                                                    	|
|  status  	|  int    	|  是       	|  1. 绑定中<br> 2. 已绑定<br> 3. 绑定失败<br> 4. 未发起过绑定（未查询到） 	|
